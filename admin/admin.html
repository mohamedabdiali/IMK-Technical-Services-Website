<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMK Admin | Jobs & Career</title>
    <link rel="icon" type="image/png" href="../favicon.png">
    <link rel="apple-touch-icon" href="../favicon.png">



    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; font-src 'self' https://cdn.jsdelivr.net data:; img-src 'self' data: https:;">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>
<body class="admin-body">
    <div class="admin-auth" id="adminAuth">
        <div class="auth-card">
            <div class="auth-badge">IMK Admin</div>
            <h2 class="auth-title" id="authTitle">Admin Login</h2>
            <p class="auth-subtitle" id="authSubtitle">Secure access for authorized team members.</p>
            <form id="authForm">
                <div class="auth-field">
                    <label for="authPassword">Password</label>
                    <input type="password" id="authPassword" autocomplete="current-password" required>
                </div>
                <div class="auth-field" id="authConfirmField" hidden>
                    <label for="authConfirm">Confirm Password</label>
                    <input type="password" id="authConfirm" autocomplete="new-password">
                </div>
                <div class="auth-actions">
                    <button type="submit" class="btn btn-primary w-100" id="authSubmit">Login</button>
                </div>
                <div class="auth-error" id="authError" hidden></div>
                <button type="button" class="auth-link" id="authReset">Reset password</button>
            </form>
        </div>
    </div>

    <div class="admin-layout" id="adminLayout">
        <aside class="admin-sidebar">
            <div class="admin-brand">
                <div class="brand-mark">IMK</div>
                <div>
                    <div class="brand-title">IMK Admin</div>
                    <div class="brand-subtitle">Content Console</div>
                </div>
            </div>

            <nav class="admin-nav">
                <a href="admin.html" class="active">Jobs & Career</a>
                <a href="#" class="disabled-link">Applications</a>
                <a href="#" class="disabled-link">Site Content</a>
                <a href="#" class="disabled-link">Reports</a>
                <a href="#" class="disabled-link">Settings</a>
            </nav>

            <div class="admin-sidebar-footer">
                <p class="small mb-2">Need more modules?</p>
                <span class="badge text-bg-light">Tell us which pages to manage next.</span>
            </div>
        </aside>

        <main class="admin-main">
            <div class="admin-header">
                <div>
                    <h1 class="admin-title">Jobs & Career Manager</h1>
                    <p class="admin-subtitle">Create, update, and publish job openings shown on the website.</p>
                </div>
                <div class="admin-header-actions">
                    <button class="btn btn-outline-secondary" id="logoutBtn">Logout</button>
                    <button class="btn btn-outline-secondary" id="exportJobs">Export JSON</button>
                    <label class="btn btn-outline-secondary mb-0" for="importJobs">Import JSON</label>
                    <input type="file" id="importJobs" accept="application/json" hidden>
                    <button class="btn btn-primary" id="addJobBtn">Add Job</button>
                </div>
            </div>

            <div class="alert alert-info admin-note">
                Changes are saved in this browser only. Use Export to back up or move changes to another device.
            </div>

            <div class="row g-3 mb-4">
                <div class="col-md-3">
                    <div class="admin-card">
                        <div class="stat-label">Total Positions</div>
                        <div class="stat-value" id="statTotal">0</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card">
                        <div class="stat-label">Active</div>
                        <div class="stat-value" id="statActive">0</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card">
                        <div class="stat-label">Draft</div>
                        <div class="stat-value" id="statDraft">0</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card">
                        <div class="stat-label">Last Updated</div>
                        <div class="stat-value" id="statUpdated">-</div>
                    </div>
                </div>
            </div>

            <div class="admin-card">
                <div class="admin-table-header">
                    <div>
                        <h2 class="table-title">All Job Positions</h2>
                        <p class="table-subtitle">Click a row to edit, duplicate, or view on the website.</p>
                    </div>
                    <div class="table-controls">
                        <div class="input-group">
                            <span class="input-group-text">Search</span>
                            <input type="text" id="jobSearchInput" class="form-control" placeholder="Job title or ID">
                        </div>
                        <select class="form-select" id="statusFilter" aria-label="Filter by status">
                            <option value="">All Statuses</option>
                            <option value="active">Active</option>
                            <option value="draft">Draft</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table align-middle admin-table">
                        <thead>
                            <tr>
                                <th>Position</th>
                                <th>Category</th>
                                <th>Location</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Updated</th>
                                <th class="text-end">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="jobsTableBody"></tbody>
                    </table>
                </div>
                <div class="admin-empty" id="jobsEmptyState" hidden>
                    No positions match the current filters.
                </div>
            </div>
        </main>
    </div>

    <div class="modal fade" id="jobModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="jobModalTitle">Add Job</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="jobForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Job Title *</label>
                                <input type="text" class="form-control" id="jobTitleInput" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Job ID (slug)</label>
                                <input type="text" class="form-control" id="jobIdInput" placeholder="auto-generated">
                                <div class="form-text">Leave blank to auto-generate from the title.</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Category *</label>
                                <select class="form-select" id="jobCategoryInput" required>
                                    <option value="skilled">Skilled Manpower</option>
                                    <option value="non-skilled">Non-Skilled Manpower</option>
                                    <option value="supervisory">Supervisory Staff</option>
                                    <option value="office">Office Staff</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Location *</label>
                                <select class="form-select" id="jobLocationInput" required>
                                    <option value="all-uae">All UAE</option>
                                    <option value="dubai">Dubai</option>
                                    <option value="abu-dhabi">Abu Dhabi</option>
                                    <option value="sharjah">Sharjah</option>
                                    <option value="ajman">Ajman</option>
                                    <option value="ras-al-khaimah">Ras Al Khaimah</option>
                                    <option value="fujairah">Fujairah</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Employment Type *</label>
                                <select class="form-select" id="jobTypeInput" required>
                                    <option value="full-time">Full-time</option>
                                    <option value="part-time">Part-time</option>
                                    <option value="contract">Contract</option>
                                    <option value="temporary">Temporary</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Salary Range</label>
                                <input type="text" class="form-control" id="jobSalaryInput" placeholder="e.g., AED 2,500 - 4,500">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Badge</label>
                                <input type="text" class="form-control" id="jobBadgeInput" placeholder="Urgent / New">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="jobStatusInput">
                                    <option value="active">Active</option>
                                    <option value="draft">Draft</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Posted Date</label>
                                <input type="date" class="form-control" id="jobPostedInput">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Job Description *</label>
                                <textarea class="form-control" id="jobDescriptionInput" rows="3" required></textarea>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Highlights (max 2)</label>
                                <input type="text" class="form-control mb-2" id="jobHighlight1Input" placeholder="Highlight 1">
                                <input type="text" class="form-control" id="jobHighlight2Input" placeholder="Highlight 2">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Requirements (one per line)</label>
                                <textarea class="form-control" id="jobRequirementsInput" rows="5"></textarea>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Responsibilities (one per line)</label>
                                <textarea class="form-control" id="jobResponsibilitiesInput" rows="5"></textarea>
                            </div>
                        </div>
                        <div class="alert alert-danger mt-3" id="jobFormError" hidden></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveJobBtn">Save Job</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/jobs-data.js"></script>
    <script src="auth.js"></script>
    <script src="admin.js"></script>
</body>
</html>






